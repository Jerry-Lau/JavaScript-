# netmask 子网掩码到底是什么？

## 需要说明的是：不是某个IP的网络号和主机号决定子网掩码是什么，而是子网掩码决定了某个IP地址的网络号与主机号是什么，IP地址是要搭配子网掩码使用的。

子网掩码的作用是判断两个 IP 地址是否属于同一子网。

子网掩码也是一串 32 位(bit)的数字。它的左边表示网络位，用数字1表示，右边表示主机位，用数字0表示。

子网掩码、默认网关、MAC地址是需要一起解释的东西。

1.计算机发送数据报的时候，知道对方 IP 是不够的，必须要知道接收者的 MAC 地址才可以。数据链路层上是没有 IP 地址概念的，只有发送者与接收者的 MAC 地址。

2.MAC 地址和 IP 地址的关系，在以太网上通过 ARP (address resolution protocol) 维护。ARP 简单的工作原理为：
-2.1 当有新设备加入网络时，会主动广播自己的 MAC 和 IP。
-2.2 当接收到 2.1 的信息时，本机建立一张对照表维护这个信息。
-2.3 当需要发送数据报给一个 IP 时，到 2.2 建立的表中查询对应的 MAC 地址并发送，当查询不到信息的时候，广播一个查询申请，要求制定的 IP 主机执行 2.1 操作，并在稍后重新执行本步骤。

3.子网掩码结合本地 IP地址后，用来确定目标 IP 是否在“逻辑上”和本机处在同一个子网内（不管实际物理情况）。当目标地址同网（即两个 IP 地址与子网掩码进行AND运算得出的网络号相同），根据 2.3 策略直接发送数据。如果不同网络，则将数据报发往默认网关 IP 对应的主机，由其负责路由转发。